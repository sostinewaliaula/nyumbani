(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3113,96],{66390:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/properties/category/[slug]",function(){return i(24742)}])},24742:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return a}});var r=i(85893),o=i(1602),l=i(39615),a=!0;t.default=e=>{var t,i,a,n,s,d,c,u;let{seoData:p,pageName:v,slug:g}=e,y="string"==typeof g?g:"",m=y.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),_=y?"".concat(m," Properties - ").concat("Nyumbani | Empower Your Real Estate Business"):"Category Properties - ".concat("Nyumbani | Empower Your Real Estate Business");return(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Z,{title:_,description:null==p?void 0:null===(i=p.data)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.description,keywords:null==p?void 0:null===(n=p.data)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.keywords,ogImage:null==p?void 0:null===(d=p.data)||void 0===d?void 0:null===(s=d[0])||void 0===s?void 0:s.image,pageName:v,structuredData:null==p?void 0:null===(u=p.data)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:c.schema_markup}),(0,r.jsx)(o.Z,{isCategoryPage:!0})]})}},1602:function(e,t,i){"use strict";i.d(t,{Z:function(){return w}});var r=i(85893),o=i(67294),l=i(45007),a=i(90456),n=i(77791),s=i(8313),d=i(93244),c=i(43820),u=i(67317),p=i(23279),v=e=>{let{properties:t=[],setFilteredProperties:i=()=>{},totalCount:l=0,onOpenFilters:a,hasActiveFilters:n,viewType:u,setViewType:v}=e,g=(0,s.m)(),[y,m]=(0,o.useState)("newest"),_=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(t.map(t=>t.id===e?{...t,is_favourite:r?1:0}:t))};return(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsx)("div",{className:"".concat("grid"===u?"grid place-items-center grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":t.length>0?"grid grid-cols-1 gap-6":"grid place-items-center grid-cols-3"),children:t.length>0?t.map((e,t)=>"list"===u?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(d.Z,{property:e,handlePropertyLike:_})},e.id||t):(0,r.jsx)(c.Z,{property:e,handlePropertyLike:_},e.id||t)):(0,r.jsx)("div",{className:"text-center flex items-center py-16 col-span-full",children:(0,r.jsx)(p.Z,{title:g("noPropertiesFound")})})})})},g=i(67296);i(21488);var y=i(14947),m=i(54772),_=i(11163),h=i(93766),f=i(75008),x=i(87076),w=e=>{var t;let{isCategoryPage:i,isCityPage:d}=e,c=(0,s.m)(),p=(0,_.useRouter)(),{locale:w,slug:j}=(null==p?void 0:p.query)||{},b=(0,x.dZ)(),N=(0,l.v9)(e=>e.location),[S,k]=(0,o.useState)([]),[C,E]=(0,o.useState)(!0),[I,F]=(0,o.useState)(!1),[P,R]=(0,o.useState)(0),[Z,B]=(0,o.useState)(0),[U,O]=(0,o.useState)("grid"),[A,T]=(0,o.useState)(!0),[L,q]=(0,o.useState)("newest"),[M,V]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(null),D=e=>JSON.parse(atob(e)),H=(0,o.useCallback)(()=>{let e=(null==p?void 0:p.query)||{};if(e.filters)try{var t,r,o,l,a,n,s,c,u,v;let i=D(decodeURIComponent(e.filters));return{property_type:0===i.property_type?"Sell":1===i.property_type?"Rent":"",category_id:i.category_id||"",category_slug_id:i.category_slug_id||"",city:(null===(t=i.location)||void 0===t?void 0:t.city)||j||"",state:(null===(r=i.location)||void 0===r?void 0:r.state)||"",country:(null===(o=i.location)||void 0===o?void 0:o.country)||"",min_price:(null===(l=i.price)||void 0===l?void 0:l.min_price)||"",max_price:(null===(a=i.price)||void 0===a?void 0:a.max_price)||"",posted_since:i.posted_since||"",promoted:(null===(n=i.flags)||void 0===n?void 0:n.promoted)===1,keywords:i.search||"",amenities:i.parameters||[],nearby_places:i.nearby_places||[],is_premium:(null===(s=i.flags)||void 0===s?void 0:s.get_all_premium_properties)===1,latitude:(null===(c=i.location)||void 0===c?void 0:c.latitude)||void 0,longitude:(null===(u=i.location)||void 0===u?void 0:u.longitude)||void 0,range:(null===(v=i.location)||void 0===v?void 0:v.range)||void 0}}catch(e){console.error("Error decoding filters from URL:",e)}return{property_type:"",category_id:"",category_slug_id:i&&j||"",city:d&&j||"",state:"",country:"",min_price:"",max_price:"",posted_since:"",promoted:!1,keywords:"",amenities:[],nearby_places:[],is_premium:!1,latitude:void 0,longitude:void 0,range:void 0}},[null==p?void 0:p.query,j,j]),[J,W]=(0,o.useState)(H);(0,o.useEffect)(()=>{(null==p?void 0:p.isReady)&&(W(H()),B(0))},[null==p?void 0:p.isReady,H]);let[z,G]=(0,o.useState)(()=>{var e,t;return d?"".concat(c("propertiesIn")," ").concat((null==j?void 0:null===(e=j.charAt(0))||void 0===e?void 0:e.toUpperCase())+(null==j?void 0:j.slice(1))):i?"".concat(c("category"),": ").concat((null==j?void 0:null===(t=j.charAt(0))||void 0===t?void 0:t.toUpperCase())+(null==j?void 0:j.slice(1))):c("allProperties")});(0,o.useEffect)(()=>{var e;d?G("".concat(c("propertiesIn")," ").concat((null==j?void 0:null===(e=j.charAt(0))||void 0===e?void 0:e.toUpperCase())+(null==j?void 0:j.slice(1)))):i?G("".concat(null==j?void 0:j.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())," ").concat(c("properties"))):G(c("allProperties"))},[d,i,j,j,c]);let K=""!==J.keywords||""!==J.property_type||""!==J.category_id||""!==J.min_price||""!==J.max_price||""!==J.posted_since||J.promoted||J.amenities&&J.amenities.length>0||J.city&&J.city!==j||""!==J.state||""!==J.country||J.is_premium||void 0!==J.latitude&&J.latitude!==(null==N?void 0:N.latitude)||void 0!==J.longitude&&J.longitude!==(null==N?void 0:N.longitude)||void 0!==J.range&&J.range!==((null==N?void 0:N.radius)?parseInt(N.radius):void 0),Q=(e,t)=>{if(!e||!t)return!1;for(let i of["property_type","category_id","category_slug_id","city","state","country","min_price","max_price","posted_since","promoted","keywords","is_premium","latitude","longitude","range"])if(e[i]!==t[i])return!1;let i=e.amenities||[],r=t.amenities||[];if(i.length!==r.length)return!1;let o=[...i].sort(),l=[...r].sort();for(let e=0;e<o.length;e++)if(o[e]!==l[e])return!1;return!0},$=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r,o;if(!e&&!t&&Q(J,X))return;e?F(!0):E(!0),t&&!e&&B(0);let l=e?Z+9:Z,a=(null==J?void 0:J.amenities)||[],n=(null==J?void 0:null===(r=J.nearby_places)||void 0===r?void 0:r.map(e=>({id:parseInt(e.id),value:parseInt(e.distance||e.value)})))||[],s={country:J.country||"",state:J.state||"",city:d?j||J.city||"":J.city||"",place_id:"",latitude:J.latitude||void 0,longitude:J.longitude||void 0,range:J.range||void 0},c={min_price:J.min_price?parseInt(J.min_price):0,max_price:J.max_price?parseInt(J.max_price):0},u={promoted:J.promoted?1:0,get_all_premium_properties:J.is_premium?1:0,most_views:"most_viewed"===L?1:0,most_liked:"most_liked"===L?1:0},p={property_type:"Sell"===J.property_type?0:"Rent"===J.property_type?1:"",category_id:J.category_id?parseInt(J.category_id):"",category_slug_id:i?j||J.category_slug_id||"":J.category_slug_id||"",parameters:a,nearby_places:n,location:s,price:c,posted_since:parseInt((0,x.os)(J.posted_since))||0,search:J.keywords||"",flags:u,limit:"9",offset:l.toString()},v=await (0,g.FH)(p);(null==v?void 0:v.error)?console.error("API returned an error:",null==v?void 0:v.error):(e?(k(e=>[...e,...null==v?void 0:v.data]),B(l)):(k((null==v?void 0:v.data)||[]),t&&B(0)),R((null==v?void 0:v.total)||0),T((null==v?void 0:v.total)>l+((null==v?void 0:null===(o=v.data)||void 0===o?void 0:o.length)||0)),Y({...J}))}catch(t){console.error("Error fetching property data:",t),e||(k([]),R(0),T(!1))}finally{e?F(!1):E(!1)}},[J,Z,j,j,L,9,X]);(0,o.useEffect)(()=>{(null==p?void 0:p.isReady)&&$(!1,!0)},[J,null==p?void 0:p.isReady,L]);let ee=e=>{W(e),M&&V(!1);let t=encodeURIComponent((0,x.cu)(e,{isCityPage:d,citySlug:j,sortBy:L,isCategoryPage:i,categorySlug:j}));try{null==p||p.push({pathname:"/".concat(w,"/properties/"),query:{filters:t}},"/".concat(w,"/properties/?filters=").concat(t))}catch(e){console.error("Error updating URL with filters:",e)}},et=(0,o.useCallback)(()=>{let e={property_type:"",category_id:"",category_slug_id:j||"",city:j||"",state:"",country:"",min_price:"",max_price:"",posted_since:"",promoted:!1,keywords:"",amenities:[],is_premium:!1,latitude:void 0,longitude:void 0,range:void 0};if(!Q(J,e)){W(e),V(!1);try{null==p||p.push({pathname:"/".concat(w,"/properties/")},"/".concat(w,"/properties/"))}catch(e){console.error("Error updating URL after clearing filters:",e)}}},[p,j,j,J,w,d,i,x.cu]),ei=()=>{!I&&A&&$(!0)},er=e=>{O(e)};return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(m.Z,{title:z,items:[{href:"/".concat(j||(null==p?void 0:null===(t=p.asPath)||void 0===t?void 0:t.split("/")[1])||""),label:z}]}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mt-8",children:[(0,r.jsx)(y.yo,{open:M,onOpenChange:V,children:(0,r.jsx)(y.ue,{side:b?"left":"right",className:"flex h-full w-full flex-col !p-0 [&>button]:hidden",children:(0,r.jsx)("div",{className:"overflow-y-auto no-scrollbar h-full p-2",children:(0,r.jsx)(n.Z,{showBorder:!1,onFilterApply:ee,handleClearFilter:et,currentFilters:J,isMobileSheet:!0,setIsFilterSheetOpen:V})})})}),(0,r.jsx)("div",{className:"hidden xl:block xl:col-span-3",children:(0,r.jsx)("div",{className:"sticky top-24",children:(0,r.jsx)(n.Z,{onFilterApply:ee,handleClearFilter:et,currentFilters:J})})}),(0,r.jsxs)("div",{className:"col-span-12 xl:col-span-9",children:[C?(0,r.jsx)(f.Z,{}):(0,r.jsx)(u.Z,{itemCount:S.length,totalItems:P,viewType:U,setViewType:er,sortBy:L,setSortBy:q,onOpenFilters:()=>V(!0),showFilterButton:!0,showSortBy:!1}),C?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:[...Array(9)].map((e,t)=>(0,r.jsx)(h.Wh,{},t))}):(0,r.jsx)(v,{properties:S,setFilteredProperties:k,totalCount:P,onOpenFilters:()=>V(!0),hasActiveFilters:K,viewType:U,setViewType:er}),A&&!C&&(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("button",{onClick:()=>{ei()},disabled:I,className:"brandColor brandBorder hover:border-transparent hover:primaryBg hover:text-white my-5 rounded-lg border bg-transparent px-4 py-3",children:I?c("loadingMore"):c("loadMore")})})]})]})})]})}},75008:function(e,t,i){"use strict";var r=i(85893);i(67294);var o=i(35134);t.Z=()=>(0,r.jsxs)("div",{className:"flex newBorder rounded-lg justify-between h-16 items-center p-4 mb-4",children:[(0,r.jsx)(o.O,{className:"h-10 w-1/6"}),(0,r.jsx)(o.O,{className:"h-10 w-1/12"})]})}},function(e){e.O(0,[3365,4838,9317,6660,4817,509,8227,5970,4396,594,6132,1255,6130,8127,8845,7665,4232,1185,5675,117,779,9177,9510,5041,456,5885,3766,1552,2888,9774,179],function(){return e(e.s=66390)}),_N_E=e.O()}]);